; let rec tarai x y z =
;   if x <= y then y
;   else tarai (tarai (x - 1) y z)
;              (tarai (y - 1) z x)
;              (tarai (z - 1) x y)
; in tarai 13 7 0
main:
    dum 1
    clos tarai
    upd 0			; env = [tarai]
    mark
    load 0  push
    load 7  push
    load 13 push
    acc 0
    app
    endlet
    ret
    
tarai:
    grab
    grab			; env = [z y x tarai]
    acc 1 push
    acc 2
    le
    bf L00
    acc 1
    ret
L00:
    mark
    acc 1  push
    acc 2  push
    load 1 push
    acc 0
    sub    push
    acc 3
    app    push

    mark
    acc 2  push
    acc 0  push
    load 1 push
    acc 1
    sub    push
    acc 3
    app    push

    mark
    acc 0  push
    acc 1  push
    load 1 push
    acc 2
    sub    push
    acc 3
    app    push

    acc 3
    tapp